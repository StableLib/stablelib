// Copyright (C) 2016 Dmitry Chestnykh
// MIT License. See LICENSE file for details.

import { encode, decode } from "./utf8";
import { benchmark, report } from "@stablelib/benchmark";

const text = `â€” Ð•h bien, mon prince. GÃªnes et Lucques ne sont plus que des apanages,
des Ð¿Ð¾Ð¼ÐµÑÑ‚ÑŒÑ, de la famille Buonaparte.  Non, je  vous prÃ©viens, que si vous
ne  me dites pas, que nous avons la guerre, si vous vous permettez encore de
pallier  toutes les infamies, toutes les  atrocitÃ©s  de cet  Antichrist  (ma
parole, j'y  crois) -- je  ne  vous  connais plus, vous n'Ãªtes plus mon ami,
vous n'Ãªtes  plus  Ð¼Ð¾Ð¹  Ð²ÐµÑ€Ð½Ñ‹Ð¹  Ñ€Ð°Ð±,  comme  vous  dites.  [1]  ÐÑƒ,
Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ, Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ.  Je vois  que  je  vous fais  peur, [2]
ÑÐ°Ð´Ð¸Ñ‚ÐµÑÑŒ Ð¸ Ñ€Ð°ÑÑÐºÐ°Ð·Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ.
     Ð¢Ð°Ðº Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ð»Ð° Ð² Ð¸ÑŽÐ»Ðµ 1805 Ð³Ð¾Ð´Ð° Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ ÐÐ½Ð½Ð° ÐŸÐ°Ð²Ð»Ð¾Ð²Ð½Ð° Ð¨ÐµÑ€ÐµÑ€, Ñ„Ñ€ÐµÐ¹Ð»Ð¸Ð½Ð° Ð¸
Ð¿Ñ€Ð¸Ð±Ð»Ð¸Ð¶ÐµÐ½Ð½Ð°Ñ  Ð¸Ð¼Ð¿ÐµÑ€Ð°Ñ‚Ñ€Ð¸Ñ†Ñ‹  ÐœÐ°Ñ€Ð¸Ð¸  Ð¤ÐµÐ¾Ð´Ð¾Ñ€Ð¾Ð²Ð½Ñ‹,  Ð²ÑÑ‚Ñ€ÐµÑ‡Ð°Ñ Ð²Ð°Ð¶Ð½Ð¾Ð³Ð¾ Ð¸  Ñ‡Ð¸Ð½Ð¾Ð²Ð½Ð¾Ð³Ð¾
ÐºÐ½ÑÐ·Ñ  Ð’Ð°ÑÐ¸Ð»Ð¸Ñ,  Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾  Ð¿Ñ€Ð¸ÐµÑ…Ð°Ð²ÑˆÐµÐ³Ð¾  Ð½Ð°  ÐµÐµ Ð²ÐµÑ‡ÐµÑ€. ÐÐ½Ð½Ð°  ÐŸÐ°Ð²Ð»Ð¾Ð²Ð½Ð°  ÐºÐ°ÑˆÐ»ÑÐ»Ð°
Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾  Ð´Ð½ÐµÐ¹, Ñƒ  Ð½ÐµÐµ Ð±Ñ‹Ð» Ð³Ñ€Ð¸Ð¿Ð¿, ÐºÐ°Ðº Ð¾Ð½Ð° Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ð»Ð° (Ð³Ñ€Ð¸Ð¿Ð¿  Ð±Ñ‹Ð» Ñ‚Ð¾Ð³Ð´Ð°  Ð½Ð¾Ð²Ð¾Ðµ
ÑÐ»Ð¾Ð²Ð¾, ÑƒÐ¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÑÐ²ÑˆÐµÐµÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾  Ñ€ÐµÐ´ÐºÐ¸Ð¼Ð¸).  Ð’ Ð·Ð°Ð¿Ð¸ÑÐ¾Ñ‡ÐºÐ°Ñ…, Ñ€Ð°Ð·Ð¾ÑÐ»Ð°Ð½Ð½Ñ‹Ñ…  ÑƒÑ‚Ñ€Ð¾Ð¼ Ñ
ÐºÑ€Ð°ÑÐ½Ñ‹Ð¼ Ð»Ð°ÐºÐµÐµÐ¼, Ð±Ñ‹Ð»Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾ Ð±ÐµÐ· Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð¸Ñ Ð²Ð¾ Ð²ÑÐµÑ…:

     "Si vous n'avez rien de mieux Ã  faire, M. le comte (Ð¸Ð»Ð¸ mon prince), et
si la perspective de passer la soirÃ©e chez une pauvre malade ne vous effraye
pas  trop,  je serai charmÃ©e de vous  voir chez moi  entre 7 et  10  heures.
Annette Scherer".[3]

     â€” Dieu, quelle virulente sortie [4] -- Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ð»,  Ð½Ð¸ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð½Ðµ
ÑÐ¼ÑƒÑ‚ÑÑÑŒ  Ñ‚Ð°ÐºÐ¾ÑŽ Ð²ÑÑ‚Ñ€ÐµÑ‡ÐµÐ¹, Ð²Ð¾ÑˆÐµÐ´ÑˆÐ¸Ð¹  ÐºÐ½ÑÐ·ÑŒ,  Ð²  Ð¿Ñ€Ð¸Ð´Ð²Ð¾Ñ€Ð½Ð¾Ð¼, ÑˆÐ¸Ñ‚Ð¾Ð¼  Ð¼ÑƒÐ½Ð´Ð¸Ñ€Ðµ,  Ð²
Ñ‡ÑƒÐ»ÐºÐ°Ñ…,  ðŸ˜† ðŸ™ðŸ½  ðŸ’¹ Ð±Ð°ÑˆÐ¼Ð°ÐºÐ°Ñ…,  Ð¿Ñ€Ð¸  Ð·Ð²ÐµÐ·Ð´Ð°Ñ…,  Ñ  ÑÐ²ÐµÑ‚Ð»Ñ‹Ð¼ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼ Ð¿Ð»Ð¾ÑÐºÐ¾Ð³Ð¾  Ð»Ð¸Ñ†Ð°.
ÐžÐ½ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ð» Ð½Ð° Ñ‚Ð¾Ð¼ Ð¸Ð·Ñ‹ÑÐºÐ°Ð½Ð½Ð¾Ð¼ Ñ„Ñ€Ð°Ð½Ñ†ÑƒÐ·ÑÐºÐ¾Ð¼ ÑÐ·Ñ‹ÐºÐµ, Ð½Ð°  ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð½Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ð»Ð¸,
Ð½Ð¾ Ð¸  Ð´ÑƒÐ¼Ð°Ð»Ð¸  Ð½Ð°ÑˆÐ¸  Ð´ÐµÐ´Ñ‹, Ð¸ Ñ Ñ‚ÐµÐ¼Ð¸ Ñ‚Ð¸Ñ…Ð¸Ð¼Ð¸, Ð¿Ð¾ÐºÑ€Ð¾Ð²Ð¸Ñ‚ÐµÐ»ÑŒÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¸Ð½Ñ‚Ð¾Ð½Ð°Ñ†Ð¸ÑÐ¼Ð¸,
ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ  ÑÐ²Ð¾Ð¹ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹  ÑÐ¾ÑÑ‚Ð°Ñ€ÐµÐ²ÑˆÐµÐ¼ÑƒÑÑ  Ð²  ÑÐ²ÐµÑ‚Ðµ  Ð¸  Ð¿Ñ€Ð¸  Ð´Ð²Ð¾Ñ€Ðµ  Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¼Ñƒ
Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÑƒ. ÐžÐ½ Ð¿Ð¾Ð´Ð¾ÑˆÐµÐ» Ðº ÐÐ½Ð½Ðµ  ÐŸÐ°Ð²Ð»Ð¾Ð²Ð½Ðµ, Ð¿Ð¾Ñ†ÐµÐ»Ð¾Ð²Ð°Ð» ÐµÐµ Ñ€ÑƒÐºÑƒ,  Ð¿Ð¾Ð´ÑÑ‚Ð°Ð²Ð¸Ð² ÐµÐ¹ ÑÐ²Ð¾ÑŽ
Ð½Ð°Ð´ÑƒÑˆÐµÐ½Ð½ÑƒÑŽ Ð¸ ÑÐ¸ÑÑŽÑ‰ÑƒÑŽ Ð»Ñ‹ÑÐ¸Ð½Ñƒ, Ð¸ Ð¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾ ÑƒÑÐµÐ»ÑÑ Ð½Ð° Ð´Ð¸Ð²Ð°Ð½Ðµ.

æˆ°çˆ­èˆ‡å’Œå¹³ åˆ—å¤«Â·æ‰˜çˆ¾æ–¯æ³° ðŸ˜ðŸ™ðŸšðŸ›ðŸœðŸðŸžðŸŸðŸ ðŸ¡`;

const enc = encode(text);

// Benchmarks report MiB/s for bytes (UTF-8 encoded).
report("utf8 encode", benchmark(() => encode(text), enc.length));
report("utf8 decode", benchmark(() => decode(enc), enc.length));
